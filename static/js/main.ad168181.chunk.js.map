{"version":3,"sources":["redux/store/store.reducers.js","redux/rootReducer.js","redux/store.js","components/Header/Cart.jsx","components/Header/Header.jsx","utils/apies.js","components/pages/Main/Products/ProductItem.jsx","redux/store/store.actions.js","components/pages/Main/Products/ProductsList.jsx","components/pages/Main/MainPage.jsx","components/pages/Cart/Products/ProductItem.jsx","components/pages/Cart/Products/ProductsList.jsx","components/pages/Cart/CartPage.jsx","App.jsx","index.js"],"names":["initialState","products","cart","JSON","parse","localStorage","getItem","storeReducer","handleActions","UPDATE_PRODUCTS","state","payload","UPDATE_CART","combineReducers","store","createStore","rootReducer","composeWithDevTools","applyMiddleware","thunk","Cart","useSelector","className","length","map","product","Number","price","quantity","reduce","sum","current","getTotalPrice","to","Header","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","FIREBASE_DB","database","STORAGE_URL","STORAGE_TOKEN","ProductItem","props","addToCart","id","src","image","alt","title","description","onClick","updateCart","createAction","setItem","stringify","ProductsList","dispatch","useDispatch","selectedProduct","findIndex","elem","push","MainPage","decrementQuantity","incrementQuantity","style","width","productIndex","splice","CartPage","App","useEffect","ref","on","type","val","basename","exact","path","component","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ad168181.chunk.js","sourcesContent":["import { handleActions } from \"redux-actions\";\r\n\r\nconst initialState = {\r\n  products: [],\r\n  cart: JSON.parse(localStorage.getItem(\"cart\")) || [],\r\n};\r\n\r\nconst storeReducer = handleActions(\r\n  {\r\n    UPDATE_PRODUCTS: (state, { payload }) => {\r\n      return { ...state, products: payload };\r\n    },\r\n    UPDATE_CART: (state, { payload }) => {\r\n      return { ...state, cart: payload };\r\n    },\r\n  },\r\n  initialState\r\n);\r\n\r\nexport default storeReducer;\r\n","import { combineReducers } from \"redux\";\r\nimport storeReducer from \"../redux/store/store.reducers\";\r\n\r\nexport default combineReducers({\r\n  store: storeReducer,\r\n});\r\n","import { createStore, applyMiddleware } from \"redux\";\r\nimport thunk from \"redux-thunk\";\r\nimport { composeWithDevTools } from \"redux-devtools-extension\";\r\nimport rootReducer from \"../redux/rootReducer\";\r\n\r\nconst store = createStore(\r\n  rootReducer,\r\n  composeWithDevTools(applyMiddleware(thunk))\r\n);\r\n\r\nexport default store;\r\n","import React from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport const Cart = () => {\r\n  const store = useSelector((state) => state.store);\r\n  const { cart } = store;\r\n\r\n  const getTotalPrice = () => {\r\n    if (cart.length > 0) {\r\n      return cart\r\n        .map((product) => {\r\n          return Number(product.price) * product.quantity;\r\n        })\r\n        .reduce((sum, current) => {\r\n          return sum + current;\r\n        });\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"d-flex\">\r\n      <div className=\"d-flex align-items-center mr-3\">\r\n        {cart.length > 0 && (\r\n          <p className=\"d-flex align-items-center mb-0\">\r\n            {`Items ${cart.length}, subtotal $${getTotalPrice()}`}\r\n          </p>\r\n        )}\r\n      </div>\r\n      <div>\r\n        <Link to=\"/cart/\">\r\n          <button className=\"btn btn-light text-uppercase\">Cart</button>\r\n        </Link>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\nimport { Cart } from \"./Cart.jsx\";\r\n\r\nexport const Header = () => {\r\n  return (\r\n    <div className=\"header\">\r\n      <div className=\"container d-flex justify-content-between\">\r\n        <h4 className=\"d-flex align-items-center m-0\">\r\n          <Link to=\"/\">Lampa test</Link>\r\n        </h4>\r\n        <Cart />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import firebase from \"firebase/app\";\r\nimport \"firebase/database\";\r\n\r\nexport const FIREBASE_CONFIG = {\r\n  apiKey: \"AIzaSyC39ynb4f8SXzUMLniQmWo7TCZXCQUaOgo\",\r\n  authDomain: \"lampa-test-ivanyuk.firebaseapp.com\",\r\n  databaseURL: \"https://lampa-test-ivanyuk-default-rtdb.firebaseio.com\",\r\n  projectId: \"lampa-test-ivanyuk\",\r\n  storageBucket: \"lampa-test-ivanyuk.appspot.com\",\r\n  messagingSenderId: \"258682313552\",\r\n  appId: \"1:258682313552:web:9c52b733087aa245f9aa55\",\r\n  measurementId: \"G-J1E66XWPRK\",\r\n};\r\n\r\nfirebase.initializeApp(FIREBASE_CONFIG);\r\n\r\nexport const FIREBASE_DB = firebase.database();\r\n\r\nexport const STORAGE_URL =\r\n  \"https://firebasestorage.googleapis.com/v0/b/lampa-test-ivanyuk.appspot.com/o/\";\r\n\r\nexport const STORAGE_TOKEN = \"65a20e7f-e979-44a1-8f44-e4580a56bfee\";\r\n","import React from \"react\";\r\nimport { STORAGE_URL, STORAGE_TOKEN } from \"../../../../utils/apies\";\r\n\r\nexport const ProductItem = (props) => {\r\n  const { product, addToCart } = props;\r\n\r\n  return (\r\n    <div className={`product-item ${product.id} mb-4`}>\r\n      <img\r\n        className=\"product-item__image\"\r\n        src={`${STORAGE_URL}${product.image}?alt=media&token=${STORAGE_TOKEN}`}\r\n        alt=\"\"\r\n      />\r\n      <h5 className=\"product-item__title mt-3 font-weight-bold\">\r\n        {product.title}\r\n      </h5>\r\n      <p className=\"product-item__description\">{product.description}</p>\r\n      <p className=\"product-item__price font-weight-bold\">\r\n        Price: {product.price} $\r\n      </p>\r\n      <button className=\"btn btn-dark col-12\" onClick={addToCart(product)}>\r\n        Add to cart\r\n      </button>\r\n    </div>\r\n  );\r\n};\r\n","import { createAction } from \"redux-actions\";\r\nimport { FIREBASE_DB } from \"../../utils/apies\";\r\n\r\nexport const getProducts = () => (dispatch) => {\r\n  FIREBASE_DB.ref(\"products\").on(\"value\", (elem) => {\r\n    dispatch({\r\n      type: \"UPDATE_PRODUCTS\",\r\n      payload: elem.val(),\r\n    });\r\n  });\r\n};\r\n\r\nexport const updateProducts = createAction(\r\n  \"UPDATE_PRODUCTS\",\r\n  (products) => products\r\n);\r\n\r\nexport const updateCart = createAction(\"UPDATE_CART\", (cart) => {\r\n  localStorage.setItem(\"cart\", JSON.stringify(cart));\r\n  return cart;\r\n});\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { ProductItem } from \"./ProductItem.jsx\";\r\nimport { updateCart } from \"../../../../redux/store/store.actions\";\r\n\r\nexport const ProductsList = () => {\r\n  const store = useSelector((state) => state.store);\r\n  const { cart } = store;\r\n  const dispatch = useDispatch();\r\n\r\n  const isCart = (id) => cart.findIndex((elem) => elem.id === id) !== -1;\r\n\r\n  const addToCart = (product) => () => {\r\n    const selectedProduct = cart.findIndex((elem) => elem.id === product.id);\r\n\r\n    isCart(product.id)\r\n      ? (cart[selectedProduct].quantity = cart[selectedProduct].quantity + 1)\r\n      : cart.push({ ...product, quantity: 1 });\r\n\r\n    dispatch(updateCart(cart));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {store.products.map((product) => {\r\n        return (\r\n          <ProductItem\r\n            product={product}\r\n            key={product.id}\r\n            addToCart={addToCart}\r\n          />\r\n        );\r\n      })}\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { ProductsList } from \"./Products/ProductsList.jsx\";\r\n\r\nexport function MainPage() {\r\n  return (\r\n    <div className=\"container d-flex justify-content-between flex-wrap mt-4\">\r\n      <ProductsList />\r\n    </div>\r\n  );\r\n}\r\n","import React from \"react\";\r\nimport { STORAGE_URL, STORAGE_TOKEN } from \"../../../../utils/apies\";\r\n\r\nexport const ProductItem = (props) => {\r\n  const { product, decrementQuantity, incrementQuantity } = props;\r\n\r\n  return (\r\n    <div\r\n      className={`d-flex col-12 product-item ${product.id} mb-4`}\r\n      style={{ width: \"100%\" }}\r\n    >\r\n      <div className=\"mr-3\">\r\n        <img\r\n          className=\"product-item__image\"\r\n          src={`${STORAGE_URL}${product.image}?alt=media&token=${STORAGE_TOKEN}`}\r\n          alt=\"\"\r\n        />\r\n      </div>\r\n      <div>\r\n        <h5 className=\"product-item__title font-weight-bold\">\r\n          {product.title}\r\n        </h5>\r\n        <p\r\n          className=\"product-item__description mb-2\"\r\n        >\r\n          {product.description}\r\n        </p>\r\n        <p className=\"product-item__price font-weight-bold m-0\">\r\n          Price: {product.price} $\r\n        </p>\r\n      </div>\r\n      <div className=\"d-flex align-items-center ml-3\">\r\n        <button\r\n          className=\"btn btn-dark font-weight-bold\"\r\n          onClick={decrementQuantity(product.id)}\r\n        >\r\n          -\r\n        </button>\r\n        <p className=\"m-0 font-weight-bold pl-3 pr-3\">{product.quantity}</p>\r\n        <button\r\n          className=\"btn btn-dark font-weight-bold\"\r\n          onClick={incrementQuantity(product.id)}\r\n        >\r\n          +\r\n        </button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { ProductItem } from \"./ProductItem.jsx\";\r\nimport { updateCart } from \"../../../../redux/store/store.actions\";\r\n\r\nexport const ProductsList = () => {\r\n  const store = useSelector((state) => state.store);\r\n  const dispatch = useDispatch();\r\n  const { cart } = store;\r\n\r\n  const selectedProduct = (id) => cart.findIndex((elem) => elem.id === id);\r\n\r\n  const decrementQuantity = (id) => () => {\r\n    const productIndex = selectedProduct(id);\r\n\r\n    cart[productIndex].quantity > 1\r\n      ? (cart[productIndex].quantity = cart[productIndex].quantity - 1)\r\n      : cart.splice(productIndex, 1);\r\n\r\n    dispatch(updateCart(cart));\r\n  };\r\n\r\n  const incrementQuantity = (id) => () => {\r\n    const productIndex = selectedProduct(id);\r\n\r\n    cart[productIndex].quantity = cart[productIndex].quantity + 1;\r\n\r\n    dispatch(updateCart(cart));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {cart.map((product) => (\r\n        <ProductItem\r\n          key={product.id}\r\n          product={product}\r\n          decrementQuantity={decrementQuantity}\r\n          incrementQuantity={incrementQuantity}\r\n        />\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n","import React from \"react\";\r\nimport { ProductsList } from \"./Products/ProductsList.jsx\";\r\n\r\nexport const CartPage = () => {\r\n  return (\r\n    <div className=\"container d-flex mt-4 mb-4\">\r\n      <div className=\"col-9 cart-products\">\r\n        <ProductsList />\r\n      </div>\r\n      <div className=\"col-3\">Form</div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect } from \"react\";\nimport { BrowserRouter, Route } from \"react-router-dom\";\nimport { useDispatch } from \"react-redux\";\nimport { Header } from \"./components/Header/Header.jsx\";\nimport { MainPage } from \"./components/pages/Main/MainPage.jsx\";\nimport { CartPage } from \"./components/pages/Cart/CartPage.jsx\";\nimport { getProducts } from \"./redux/store/store.actions\";\n\nfunction App() {\n  const dispatch = useDispatch();\n\n  useEffect(() => {\n    dispatch(getProducts());\n  }, []);\n\n  return (\n    <BrowserRouter basename=\"/lampa-test/\">\n      <Header />\n      <Route exact path=\"/\" component={MainPage} />\n      <Route path=\"/cart/\" component={CartPage} />\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { Provider } from \"react-redux\";\nimport store from \"./redux/store\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport \"./App.css\";\nimport App from \"./App.jsx\";\n\nReactDOM.render(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}